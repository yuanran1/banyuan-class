# http与https

基于tcp。



### http：

全称：HyperText Transfer Protocol

是一个客户端和服务器端请求和应答的标准（tcp），用于在互联网上传输数据

http传输的数据都是未加密的，就是明文的信息，不安全。

### https： 

全称：Hyper Text Transfer Protocol over SecureSocket Layer

简单来说，就是安全版本的http

因为http的明文特性，SSL（Secure Scoket Layer）/ TLS(Transport Layer Security)传输层安全协议，用来加密http协议传输的数据，从而诞生了https。





### 3次握手，4次挥手：

3次握手的作用就是为了服务器端和客户端明确自己和对方的收发能力是否正常。



#### 第一次握手：

客户端发送网络包，服务器端收到后，服务器端得到结论，客户端发送能力是正常的。



#### 第二次握手：

服务器端发包，客户端收到，客户端知道了服务器端正常。包括发送和接受能力。



#### 第三次握手：

客户端发包，服务器端收到，服务端知道，客户端的接受能力也是正常的。



### tips：

三次握手过程中，能否携带数据？

第一次和第二次是不能携带数据的。原因是为了防止攻击，同时在前两次还没确定可不可以发送数据前，发送数据是没有意义的。





### 4次挥手：

建立连接需要3次握手，那么终止连接需要经过4次挥手。其原因是http中，是半关闭的，在一端在关闭了它自己的发送后还能有接受数据的能力。



假设Client端发起中断连接请求，也就是发送FIN报文。Server端接到FIN报文后，意思是说"我Client端没有数据要发给你了"，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK，“告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息”。这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。当Server端确定数据已发送完成，则向Client端发送FIN报文，“告诉Client端，好了，我这边数据发完了，准备好关闭连接了”。Client端收到FIN报文后，"就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传。“，Server端收到ACK后，“就知道可以断开连接了”。Client端等待了2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，我Client端也可以关闭连接了。Ok，TCP连接就这样关闭了！



#### 第一次挥手：

客户端发送报文，停止发送数据，主动关闭链接，进入等待状态，等待服务器的确认。



#### 第二次挥手：

服务端收到报文后，发包到客户端，表示收到了客户端停止发包的消息。即，发送了确认报文，服务端进入关闭等待状态。



#### 第三次挥手：

如果服务端也想关闭了，和客户端一样，发送报文

#### 第四次挥手：

同第二次挥手。





### 长链接和短链接：

**长连接：** 客户端和服务端建立连接后不进行断开，之后客户端再次访问这个服务器上的内容时，继续使用这一条连接通道。

**短连接：** 客户端和服务端建立连接，发送完数据后立马断开连接。下次要取数据，需要再次建立连接。



tips：

在HTTP/1.0中，默认使用的是短连接。但从 HTTP/1.1起，默认使用长连接。在服务器端，会设置一个较短的连接时间，短的过期时间优势是可以快速传输多个web页面组件。



